import gradio as gr
import ollama
from pypdf import PdfReader

def sum(pdf):
    if pdf is None:
        return "Upload the file"

    reader = PdfReader(pdf.name)
    text = ""
    for p in reader.pages:
        text += p.extract_text()+"\n"

    text=text[:4000]

    prompt = f"Summarize this pdf content {text}"

    resp = ollama.chat(
        model = "qwen2.5:0.5b",
        messages = [{"role":"user","content":prompt}]
    )

    return resp["message"]["content"]

gr.Interface(
    fn=sum,
    inputs=gr.File(label="Upload the file"),
    outputs=gr.Textbox(label="Summary",lines=8),
    title = "Summarizer"
).launch()
